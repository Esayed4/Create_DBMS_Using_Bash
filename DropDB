#!/usr/bin/bash

DropDB() {
    DBPath="./DBs"
    user=$(whoami)
    
    # Get DB name with Zenity
    dbname=$(zenity --entry \
        --title="Drop Database" \
        --text="Enter database name to delete:" \
        --width=400 --height=150)
    
    if [[ -z "$dbname" ]]; then
        zenity --error --text="Operation cancelled." --title="Cancelled"
        return
    fi
    
    fullPath="$DBPath/${user}_${dbname}"
    
    if [[ -d "$fullPath" ]]; then
        # Confirmation dialog
        if zenity --question \
            --title="Confirm Delete" \
            --text="Are you sure you want to delete DB '$dbname'?\nThis cannot be undone!" \
            --width=400 --height=150; then
            
            rm -r "$fullPath"
            zenity --info \
                --title="Success" \
                --text="Database '$dbname' deleted." \
                --width=350 --height=120
        else
            zenity --info \
                --text="Operation cancelled." \
                --title="Cancelled"
        fi
    else
        zenity --error \
            --title="Database Not Found" \
            --text="Cannot find database '$dbname'." \
            --width=350 --height=120
    fi
}

DropDB
